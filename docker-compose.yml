version: "3.3"
services:
  prod:
    container_name: Weather
    build:
      context: .
      dockerfile: Dockerfile
      args:
        - NPM_TOKEN=${GH_TOKEN}

    volumes:
      - ./src:/app/src

    env_file:
      - .env
    networks:
      - mongo
      - influx
    environment:
      - PRODUCTION=true

    entrypoint: ["npm", "start"]
    restart: unless-stopped

networks:
  mongo:
    name: mongodb
  influx:
    name: influxdb